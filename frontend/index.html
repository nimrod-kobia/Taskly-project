<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taskly â€” Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light px-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Taskly</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="tasks.html">My Tasks</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Calendar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="profileNav">Profile</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <a class="btn btn-outline-primary me-2" href="login.html">Log In</a>
                    <a class="btn btn-primary" href="register.html">Sign Up</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN -->
    <div class="container my-4">
        <!-- Dashboard Stats -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stats-card bg-primary">
                    <!-- 
                TODO:
                - Fetch total number of tasks from backend (e.g., GET /api/tasks/count or /api/tasks).
                - Display the total count dynamically here.
            -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Total Tasks</h5>
                            <h2 id="totalTasks">0</h2>
                        </div>
                        <i class="fas fa-tasks"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card bg-success">
                    <!-- 
                TODO:
                - Fetch number of completed tasks from backend (e.g., GET /api/tasks?status=done).
                - Display the completed count dynamically here.
            -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Completed</h5>
                            <h2 id="completedTasks">0</h2>
                        </div>
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card bg-warning">
                    <!-- 
                TODO:
                - Fetch number of in-progress tasks from backend (e.g., GET /api/tasks?status=inprogress).
                - Display the in-progress count dynamically here.
            -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>In Progress</h5>
                            <h2 id="inProgressTasks">0</h2>
                        </div>
                        <i class="fas fa-spinner"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card bg-danger">
                    <!-- 
                TODO:
                - Fetch number of overdue tasks from backend (e.g., GET /api/tasks?overdue=true).
                - Display the overdue count dynamically here.
            -->
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Overdue</h5>
                            <h2 id="overdueTasks">0</h2>
                        </div>
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2>My Tasks</h2>
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#taskModal">
                <i class="fas fa-plus me-1"></i> Create Task
            </button>
        </div>

        <!-- Controls -->
        <div class="d-flex flex-wrap align-items-center mb-3 gap-2">
            <select id="viewSelect" class="form-select" style="width: auto;">
                <option value="list">List view</option>
                <option value="kanban">Kanban</option>
                <option value="calendar">Calendar</option>
            </select>
            <input id="searchInput" class="form-control" placeholder="Search tasks..." style="width: auto;"/>
        </div>

        <!-- CONTENT AREAS -->
        <div id="listView">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Deadline</th>
                            <th>Priority</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="taskList">
                        <!-- 
        TODO: 
        - Fetch tasks for the dashboard from the backend API (e.g., /api/tasks?limit=3 or similar).
        - Render each task as a <tr>.
        - Implement actions (edit/delete) to interact with backend endpoints.
        - Ensure updates to the UI after backend changes.
    -->
</tbody>
                </table>
            </div>
        </div>

        <div id="kanbanView" class="row" style="display:none;">
            <!-- 
        TODO:
        - Fetch tasks from backend and group by status (To Do, In Progress, Done).
        - Render each task in the appropriate column.
        - Enable drag-and-drop to update status and send updates to backend.
    -->
</div>

<div id="calendarView" style="display:none;">
    <!-- 
        TODO:
        - Fetch tasks with deadlines from backend.
        - Render tasks on a calendar component.
        - Allow clicking a date/task to view/edit details (fetch from backend).
    -->
</div>

<div id="profileView" style="display:none;">
    <!-- 
        TODO:
        - Fetch user activity summary from backend (e.g., /api/user/activity).
        - Display days with most activities and most frequent activities.
        - Optionally, use a chart library for better visualization.
    -->
</div>
    </div>

    <!-- CREATE / EDIT MODAL -->
    <!-- 
    TODO:
    - On form submit, send POST (create) or PUT (edit) request to backend.
    - Populate modal fields when editing (fetch task details from backend if needed).
    - Refresh task lists after successful operation.
-->
    <div class="modal fade" id="taskModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <form id="taskForm" class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalTitle">Create Task</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="taskId" />
                    <div class="mb-3">
                        <label class="form-label">Title</label>
                        <input id="title" class="form-control" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea id="description" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Deadline</label>
                            <input id="deadline" type="date" class="form-control" />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Status</label>
                            <select id="status" class="form-select">
                                <option value="todo">To Do</option>
                                <option value="inprogress">In Progress</option>
                                <option value="done">Done</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <label class="form-label">Priority</label>
                            <select id="urgency" class="form-select">
                                <option value="low">Low</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Estimated effort (hours)</label>
                            <input id="effort" type="number" min="0" class="form-control" value="1" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Bootstrap JS (bundle includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <footer class="bg-dark text-light text-center py-3 mt-5">
        <p>&copy; 2025 Taskly. All rights reserved.</p>
    </footer>
</body>
</html>